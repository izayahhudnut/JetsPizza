"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/recommed-products";
exports.ids = ["pages/api/recommed-products"];
exports.modules = {

/***/ "compute-cosine-similarity":
/*!********************************************!*\
  !*** external "compute-cosine-similarity" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("compute-cosine-similarity");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "node-cache":
/*!*****************************!*\
  !*** external "node-cache" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node-cache");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("openai");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frecommed-products&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frecommed-products.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frecommed-products&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frecommed-products.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_recommed_products_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/recommed-products.ts */ \"(api)/./pages/api/recommed-products.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_recommed_products_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_recommed_products_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_recommed_products_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_recommed_products_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/recommed-products\",\n        pathname: \"/api/recommed-products\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_recommed_products_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnJlY29tbWVkLXByb2R1Y3RzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZyZWNvbW1lZC1wcm9kdWN0cy50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUM2RDtBQUM3RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsNERBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDREQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Zyb250ZW5kLz84YWY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvcmVjb21tZWQtcHJvZHVjdHMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9yZWNvbW1lZC1wcm9kdWN0c1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3JlY29tbWVkLXByb2R1Y3RzXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frecommed-products&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frecommed-products.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/recommed-products.ts":
/*!****************************************!*\
  !*** ./pages/api/recommed-products.ts ***!
  \****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var node_cache__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! node-cache */ \"node-cache\");\n/* harmony import */ var node_cache__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(node_cache__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([openai__WEBPACK_IMPORTED_MODULE_0__]);\nopenai__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// import { NextApiRequest, NextApiResponse } from \"next\";\n// import OpenAI from \"openai\";\n// import { Pool } from \"pg\";\n// var similarity = require(\"compute-cosine-similarity\");\n// import NodeCache from \"node-cache\";\n// const cache = new NodeCache({ stdTTL: 300 });\n// const pool = new Pool({\n//     connectionString: process.env.PRODUCTS_DATABASE_URL,\n//     ssl: { rejectUnauthorized: false },\n// });\n// const openai = new OpenAI({\n//     apiKey: process.env.OPENAI_API_KEY,\n// });\n// export default async function handler(\n//     req: NextApiRequest,\n//     res: NextApiResponse\n// ) {\n//     if (req.method !== \"POST\") {\n//         res.status(405).json({ error: \"Method not allowed\" });\n//         return;\n//     }\n//     const { userInput } = req.body;\n//     console.log(userInput, \"userInput\");\n//     try {\n//         const cachedResponse = cache.get(userInput);\n//         if (cachedResponse) {\n//             res.status(200).json(cachedResponse);\n//             return;\n//         }\n//         const embeddingResponse = await openai.embeddings.create({\n//             model: \"text-embedding-ada-002\",\n//             input: userInput,\n//         });\n//         const userEmbedding = embeddingResponse.data[0].embedding;\n//         const client = await pool.connect();\n//         try {\n//             const result = await client.query(\n//                 \"SELECT product_name, strain_type, brand_name, cbd, image, price, dispensary, options, thc, sales, embedding FROM products\"\n//             );\n//             const products = result.rows;\n//             const similarities = products.map((product) => ({\n//                 ...product,\n//                 similarity: similarity(userEmbedding, product.embedding),\n//             }));\n//             similarities.sort((a, b) => b.similarity - a.similarity);\n//             const topProducts = similarities\n//                 .slice(0, 3)\n//                 .map(({ embedding, ...product }) => product);\n//             cache.set(userInput, topProducts);\n//             res.status(200).json(topProducts);\n//         } finally {\n//             client.release();\n//         }\n//     } catch (err: any) {\n//         console.error(err);\n//         res.status(500).json({ error: err.message });\n//     }\n// }\n\n\n\nconst similarity = __webpack_require__(/*! compute-cosine-similarity */ \"compute-cosine-similarity\");\nconst cache = new (node_cache__WEBPACK_IMPORTED_MODULE_2___default())({\n    stdTTL: 300\n});\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_1__.Pool({\n    connectionString: process.env.PRODUCTS_DATABASE_URL,\n    ssl: {\n        rejectUnauthorized: false\n    }\n});\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        res.status(405).json({\n            error: \"Method not allowed\"\n        });\n        return;\n    }\n    const { userInput } = req.body;\n    console.log(userInput, \"userInput\");\n    try {\n        const cachedResponse = cache.get(userInput);\n        if (cachedResponse) {\n            res.status(200).json(cachedResponse);\n            return;\n        }\n        const embeddingResponse = await openai.embeddings.create({\n            model: \"text-embedding-ada-002\",\n            input: userInput\n        });\n        const userEmbedding = embeddingResponse.data[0].embedding;\n        const client = await pool.connect();\n        try {\n            const result = await client.query(\"SELECT product_name, strain_type, brand_name, cbd, image, price, dispensary, options, thc, sales, embedding FROM products\");\n            const products = result.rows;\n            const similarities = products.map((product)=>{\n                if (!product.embedding || !Array.isArray(product.embedding)) {\n                    console.error(\"Invalid product embedding:\", product);\n                    return {\n                        ...product,\n                        similarity: null\n                    };\n                }\n                try {\n                    return {\n                        ...product,\n                        similarity: similarity(userEmbedding, product.embedding)\n                    };\n                } catch (error) {\n                    console.error(\"Error computing similarity:\", error);\n                    return {\n                        ...product,\n                        similarity: null\n                    };\n                }\n            });\n            similarities.sort((a, b)=>(b.similarity ?? 0) - (a.similarity ?? 0));\n            const topProducts = similarities.filter((product)=>product.similarity !== null).slice(0, 10).map(({ embedding, ...product })=>product);\n            cache.set(userInput, topProducts);\n            res.status(200).json(topProducts);\n        } finally{\n            client.release();\n        }\n    } catch (err) {\n        console.error(err);\n        res.status(500).json({\n            error: err.message\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcmVjb21tZWQtcHJvZHVjdHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsMERBQTBEO0FBQzFELCtCQUErQjtBQUMvQiw2QkFBNkI7QUFDN0IseURBQXlEO0FBRXpELHNDQUFzQztBQUV0QyxnREFBZ0Q7QUFFaEQsMEJBQTBCO0FBQzFCLDJEQUEyRDtBQUMzRCwwQ0FBMEM7QUFDMUMsTUFBTTtBQUVOLDhCQUE4QjtBQUM5QiwwQ0FBMEM7QUFDMUMsTUFBTTtBQUVOLHlDQUF5QztBQUN6QywyQkFBMkI7QUFDM0IsMkJBQTJCO0FBQzNCLE1BQU07QUFDTixtQ0FBbUM7QUFDbkMsaUVBQWlFO0FBQ2pFLGtCQUFrQjtBQUNsQixRQUFRO0FBRVIsc0NBQXNDO0FBRXRDLDJDQUEyQztBQUUzQyxZQUFZO0FBQ1osdURBQXVEO0FBQ3ZELGdDQUFnQztBQUNoQyxvREFBb0Q7QUFDcEQsc0JBQXNCO0FBQ3RCLFlBQVk7QUFFWixxRUFBcUU7QUFDckUsK0NBQStDO0FBQy9DLGdDQUFnQztBQUNoQyxjQUFjO0FBQ2QscUVBQXFFO0FBRXJFLCtDQUErQztBQUMvQyxnQkFBZ0I7QUFDaEIsaURBQWlEO0FBQ2pELDhJQUE4STtBQUM5SSxpQkFBaUI7QUFDakIsNENBQTRDO0FBRTVDLGdFQUFnRTtBQUNoRSw4QkFBOEI7QUFDOUIsNEVBQTRFO0FBQzVFLG1CQUFtQjtBQUVuQix3RUFBd0U7QUFFeEUsK0NBQStDO0FBQy9DLCtCQUErQjtBQUMvQixnRUFBZ0U7QUFFaEUsaURBQWlEO0FBQ2pELGlEQUFpRDtBQUNqRCxzQkFBc0I7QUFDdEIsZ0NBQWdDO0FBQ2hDLFlBQVk7QUFDWiwyQkFBMkI7QUFDM0IsOEJBQThCO0FBQzlCLHdEQUF3RDtBQUN4RCxRQUFRO0FBQ1IsSUFBSTtBQUd3QjtBQUNGO0FBQ1M7QUFDbkMsTUFBTUcsYUFBYUMsbUJBQU9BLENBQUMsNERBQTJCO0FBRXRELE1BQU1DLFFBQVEsSUFBSUgsbURBQVNBLENBQUM7SUFBRUksUUFBUTtBQUFJO0FBRTFDLE1BQU1DLE9BQU8sSUFBSU4sb0NBQUlBLENBQUM7SUFDbEJPLGtCQUFrQkMsUUFBUUMsR0FBRyxDQUFDQyxxQkFBcUI7SUFDbkRDLEtBQUs7UUFBRUMsb0JBQW9CO0lBQU07QUFDckM7QUFFQSxNQUFNQyxTQUFTLElBQUlkLDhDQUFNQSxDQUFDO0lBQ3RCZSxRQUFRTixRQUFRQyxHQUFHLENBQUNNLGNBQWM7QUFDdEM7QUFFZSxlQUFlQyxRQUMxQkMsR0FBbUIsRUFDbkJDLEdBQW9CO0lBRXBCLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3ZCRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBcUI7UUFDbkQ7SUFDSjtJQUVBLE1BQU0sRUFBRUMsU0FBUyxFQUFFLEdBQUdOLElBQUlPLElBQUk7SUFFOUJDLFFBQVFDLEdBQUcsQ0FBQ0gsV0FBVztJQUV2QixJQUFJO1FBQ0EsTUFBTUksaUJBQWlCdkIsTUFBTXdCLEdBQUcsQ0FBQ0w7UUFDakMsSUFBSUksZ0JBQWdCO1lBQ2hCVCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDTTtZQUNyQjtRQUNKO1FBRUEsTUFBTUUsb0JBQW9CLE1BQU1oQixPQUFPaUIsVUFBVSxDQUFDQyxNQUFNLENBQUM7WUFDckRDLE9BQU87WUFDUEMsT0FBT1Y7UUFDWDtRQUNBLE1BQU1XLGdCQUFnQkwsa0JBQWtCTSxJQUFJLENBQUMsRUFBRSxDQUFDQyxTQUFTO1FBRXpELE1BQU1DLFNBQVMsTUFBTS9CLEtBQUtnQyxPQUFPO1FBQ2pDLElBQUk7WUFDQSxNQUFNQyxTQUFTLE1BQU1GLE9BQU9HLEtBQUssQ0FDN0I7WUFFSixNQUFNQyxXQUFXRixPQUFPRyxJQUFJO1lBRTVCLE1BQU1DLGVBQWVGLFNBQVNHLEdBQUcsQ0FBQyxDQUFDQztnQkFDL0IsSUFBSSxDQUFDQSxRQUFRVCxTQUFTLElBQUksQ0FBQ1UsTUFBTUMsT0FBTyxDQUFDRixRQUFRVCxTQUFTLEdBQUc7b0JBQ3pEWCxRQUFRSCxLQUFLLENBQUMsOEJBQThCdUI7b0JBQzVDLE9BQU87d0JBQ0gsR0FBR0EsT0FBTzt3QkFDVjNDLFlBQVk7b0JBQ2hCO2dCQUNKO2dCQUNBLElBQUk7b0JBQ0EsT0FBTzt3QkFDSCxHQUFHMkMsT0FBTzt3QkFDVjNDLFlBQVlBLFdBQ1JnQyxlQUNBVyxRQUFRVCxTQUFTO29CQUV6QjtnQkFDSixFQUFFLE9BQU9kLE9BQU87b0JBQ1pHLFFBQVFILEtBQUssQ0FBQywrQkFBK0JBO29CQUM3QyxPQUFPO3dCQUNILEdBQUd1QixPQUFPO3dCQUNWM0MsWUFBWTtvQkFDaEI7Z0JBQ0o7WUFDSjtZQUVBeUMsYUFBYUssSUFBSSxDQUNiLENBQUNDLEdBQUdDLElBQU0sQ0FBQ0EsRUFBRWhELFVBQVUsSUFBSSxLQUFNK0MsQ0FBQUEsRUFBRS9DLFVBQVUsSUFBSTtZQUdyRCxNQUFNaUQsY0FBY1IsYUFDZlMsTUFBTSxDQUFDLENBQUNQLFVBQVlBLFFBQVEzQyxVQUFVLEtBQUssTUFDM0NtRCxLQUFLLENBQUMsR0FBRyxJQUNUVCxHQUFHLENBQUMsQ0FBQyxFQUFFUixTQUFTLEVBQUUsR0FBR1MsU0FBUyxHQUFLQTtZQUV4Q3pDLE1BQU1rRCxHQUFHLENBQUMvQixXQUFXNEI7WUFDckJqQyxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDOEI7UUFDekIsU0FBVTtZQUNOZCxPQUFPa0IsT0FBTztRQUNsQjtJQUNKLEVBQUUsT0FBT0MsS0FBVTtRQUNmL0IsUUFBUUgsS0FBSyxDQUFDa0M7UUFDZHRDLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBT2tDLElBQUlDLE9BQU87UUFBQztJQUM5QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9wYWdlcy9hcGkvcmVjb21tZWQtcHJvZHVjdHMudHM/NjViOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcbi8vIGltcG9ydCBPcGVuQUkgZnJvbSBcIm9wZW5haVwiO1xuLy8gaW1wb3J0IHsgUG9vbCB9IGZyb20gXCJwZ1wiO1xuLy8gdmFyIHNpbWlsYXJpdHkgPSByZXF1aXJlKFwiY29tcHV0ZS1jb3NpbmUtc2ltaWxhcml0eVwiKTtcblxuLy8gaW1wb3J0IE5vZGVDYWNoZSBmcm9tIFwibm9kZS1jYWNoZVwiO1xuXG4vLyBjb25zdCBjYWNoZSA9IG5ldyBOb2RlQ2FjaGUoeyBzdGRUVEw6IDMwMCB9KTtcblxuLy8gY29uc3QgcG9vbCA9IG5ldyBQb29sKHtcbi8vICAgICBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5QUk9EVUNUU19EQVRBQkFTRV9VUkwsXG4vLyAgICAgc3NsOiB7IHJlamVjdFVuYXV0aG9yaXplZDogZmFsc2UgfSxcbi8vIH0pO1xuXG4vLyBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbi8vICAgICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxuLy8gfSk7XG5cbi8vIGV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4vLyAgICAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbi8vICAgICByZXM6IE5leHRBcGlSZXNwb25zZVxuLy8gKSB7XG4vLyAgICAgaWYgKHJlcS5tZXRob2QgIT09IFwiUE9TVFwiKSB7XG4vLyAgICAgICAgIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6IFwiTWV0aG9kIG5vdCBhbGxvd2VkXCIgfSk7XG4vLyAgICAgICAgIHJldHVybjtcbi8vICAgICB9XG5cbi8vICAgICBjb25zdCB7IHVzZXJJbnB1dCB9ID0gcmVxLmJvZHk7XG5cbi8vICAgICBjb25zb2xlLmxvZyh1c2VySW5wdXQsIFwidXNlcklucHV0XCIpO1xuXG4vLyAgICAgdHJ5IHtcbi8vICAgICAgICAgY29uc3QgY2FjaGVkUmVzcG9uc2UgPSBjYWNoZS5nZXQodXNlcklucHV0KTtcbi8vICAgICAgICAgaWYgKGNhY2hlZFJlc3BvbnNlKSB7XG4vLyAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihjYWNoZWRSZXNwb25zZSk7XG4vLyAgICAgICAgICAgICByZXR1cm47XG4vLyAgICAgICAgIH1cblxuLy8gICAgICAgICBjb25zdCBlbWJlZGRpbmdSZXNwb25zZSA9IGF3YWl0IG9wZW5haS5lbWJlZGRpbmdzLmNyZWF0ZSh7XG4vLyAgICAgICAgICAgICBtb2RlbDogXCJ0ZXh0LWVtYmVkZGluZy1hZGEtMDAyXCIsXG4vLyAgICAgICAgICAgICBpbnB1dDogdXNlcklucHV0LFxuLy8gICAgICAgICB9KTtcbi8vICAgICAgICAgY29uc3QgdXNlckVtYmVkZGluZyA9IGVtYmVkZGluZ1Jlc3BvbnNlLmRhdGFbMF0uZW1iZWRkaW5nO1xuXG4vLyAgICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2wuY29ubmVjdCgpO1xuLy8gICAgICAgICB0cnkge1xuLy8gICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KFxuLy8gICAgICAgICAgICAgICAgIFwiU0VMRUNUIHByb2R1Y3RfbmFtZSwgc3RyYWluX3R5cGUsIGJyYW5kX25hbWUsIGNiZCwgaW1hZ2UsIHByaWNlLCBkaXNwZW5zYXJ5LCBvcHRpb25zLCB0aGMsIHNhbGVzLCBlbWJlZGRpbmcgRlJPTSBwcm9kdWN0c1wiXG4vLyAgICAgICAgICAgICApO1xuLy8gICAgICAgICAgICAgY29uc3QgcHJvZHVjdHMgPSByZXN1bHQucm93cztcblxuLy8gICAgICAgICAgICAgY29uc3Qgc2ltaWxhcml0aWVzID0gcHJvZHVjdHMubWFwKChwcm9kdWN0KSA9PiAoe1xuLy8gICAgICAgICAgICAgICAgIC4uLnByb2R1Y3QsXG4vLyAgICAgICAgICAgICAgICAgc2ltaWxhcml0eTogc2ltaWxhcml0eSh1c2VyRW1iZWRkaW5nLCBwcm9kdWN0LmVtYmVkZGluZyksXG4vLyAgICAgICAgICAgICB9KSk7XG5cbi8vICAgICAgICAgICAgIHNpbWlsYXJpdGllcy5zb3J0KChhLCBiKSA9PiBiLnNpbWlsYXJpdHkgLSBhLnNpbWlsYXJpdHkpO1xuXG4vLyAgICAgICAgICAgICBjb25zdCB0b3BQcm9kdWN0cyA9IHNpbWlsYXJpdGllc1xuLy8gICAgICAgICAgICAgICAgIC5zbGljZSgwLCAzKVxuLy8gICAgICAgICAgICAgICAgIC5tYXAoKHsgZW1iZWRkaW5nLCAuLi5wcm9kdWN0IH0pID0+IHByb2R1Y3QpO1xuXG4vLyAgICAgICAgICAgICBjYWNoZS5zZXQodXNlcklucHV0LCB0b3BQcm9kdWN0cyk7XG4vLyAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih0b3BQcm9kdWN0cyk7XG4vLyAgICAgICAgIH0gZmluYWxseSB7XG4vLyAgICAgICAgICAgICBjbGllbnQucmVsZWFzZSgpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbi8vICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuLy8gICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSB9KTtcbi8vICAgICB9XG4vLyB9XG5cbmltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IE9wZW5BSSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBQb29sIH0gZnJvbSBcInBnXCI7XG5pbXBvcnQgTm9kZUNhY2hlIGZyb20gXCJub2RlLWNhY2hlXCI7XG5jb25zdCBzaW1pbGFyaXR5ID0gcmVxdWlyZShcImNvbXB1dGUtY29zaW5lLXNpbWlsYXJpdHlcIik7XG5cbmNvbnN0IGNhY2hlID0gbmV3IE5vZGVDYWNoZSh7IHN0ZFRUTDogMzAwIH0pO1xuXG5jb25zdCBwb29sID0gbmV3IFBvb2woe1xuICAgIGNvbm5lY3Rpb25TdHJpbmc6IHByb2Nlc3MuZW52LlBST0RVQ1RTX0RBVEFCQVNFX1VSTCxcbiAgICBzc2w6IHsgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZSB9LFxufSk7XG5cbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcbiAgICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICAgIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgICBpZiAocmVxLm1ldGhvZCAhPT0gXCJQT1NUXCIpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogXCJNZXRob2Qgbm90IGFsbG93ZWRcIiB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdXNlcklucHV0IH0gPSByZXEuYm9keTtcblxuICAgIGNvbnNvbGUubG9nKHVzZXJJbnB1dCwgXCJ1c2VySW5wdXRcIik7XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjYWNoZWRSZXNwb25zZSA9IGNhY2hlLmdldCh1c2VySW5wdXQpO1xuICAgICAgICBpZiAoY2FjaGVkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGNhY2hlZFJlc3BvbnNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVtYmVkZGluZ1Jlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmVtYmVkZGluZ3MuY3JlYXRlKHtcbiAgICAgICAgICAgIG1vZGVsOiBcInRleHQtZW1iZWRkaW5nLWFkYS0wMDJcIixcbiAgICAgICAgICAgIGlucHV0OiB1c2VySW5wdXQsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB1c2VyRW1iZWRkaW5nID0gZW1iZWRkaW5nUmVzcG9uc2UuZGF0YVswXS5lbWJlZGRpbmc7XG5cbiAgICAgICAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQucXVlcnkoXG4gICAgICAgICAgICAgICAgXCJTRUxFQ1QgcHJvZHVjdF9uYW1lLCBzdHJhaW5fdHlwZSwgYnJhbmRfbmFtZSwgY2JkLCBpbWFnZSwgcHJpY2UsIGRpc3BlbnNhcnksIG9wdGlvbnMsIHRoYywgc2FsZXMsIGVtYmVkZGluZyBGUk9NIHByb2R1Y3RzXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBwcm9kdWN0cyA9IHJlc3VsdC5yb3dzO1xuXG4gICAgICAgICAgICBjb25zdCBzaW1pbGFyaXRpZXMgPSBwcm9kdWN0cy5tYXAoKHByb2R1Y3QpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXByb2R1Y3QuZW1iZWRkaW5nIHx8ICFBcnJheS5pc0FycmF5KHByb2R1Y3QuZW1iZWRkaW5nKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCBwcm9kdWN0IGVtYmVkZGluZzpcIiwgcHJvZHVjdCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm9kdWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcml0eTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb2R1Y3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaW1pbGFyaXR5OiBzaW1pbGFyaXR5KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJFbWJlZGRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdC5lbWJlZGRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNvbXB1dGluZyBzaW1pbGFyaXR5OlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm9kdWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltaWxhcml0eTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2ltaWxhcml0aWVzLnNvcnQoXG4gICAgICAgICAgICAgICAgKGEsIGIpID0+IChiLnNpbWlsYXJpdHkgPz8gMCkgLSAoYS5zaW1pbGFyaXR5ID8/IDApXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCB0b3BQcm9kdWN0cyA9IHNpbWlsYXJpdGllc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHByb2R1Y3QpID0+IHByb2R1Y3Quc2ltaWxhcml0eSAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMTApXG4gICAgICAgICAgICAgICAgLm1hcCgoeyBlbWJlZGRpbmcsIC4uLnByb2R1Y3QgfSkgPT4gcHJvZHVjdCk7XG5cbiAgICAgICAgICAgIGNhY2hlLnNldCh1c2VySW5wdXQsIHRvcFByb2R1Y3RzKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHRvcFByb2R1Y3RzKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVyci5tZXNzYWdlIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJPcGVuQUkiLCJQb29sIiwiTm9kZUNhY2hlIiwic2ltaWxhcml0eSIsInJlcXVpcmUiLCJjYWNoZSIsInN0ZFRUTCIsInBvb2wiLCJjb25uZWN0aW9uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIlBST0RVQ1RTX0RBVEFCQVNFX1VSTCIsInNzbCIsInJlamVjdFVuYXV0aG9yaXplZCIsIm9wZW5haSIsImFwaUtleSIsIk9QRU5BSV9BUElfS0VZIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInVzZXJJbnB1dCIsImJvZHkiLCJjb25zb2xlIiwibG9nIiwiY2FjaGVkUmVzcG9uc2UiLCJnZXQiLCJlbWJlZGRpbmdSZXNwb25zZSIsImVtYmVkZGluZ3MiLCJjcmVhdGUiLCJtb2RlbCIsImlucHV0IiwidXNlckVtYmVkZGluZyIsImRhdGEiLCJlbWJlZGRpbmciLCJjbGllbnQiLCJjb25uZWN0IiwicmVzdWx0IiwicXVlcnkiLCJwcm9kdWN0cyIsInJvd3MiLCJzaW1pbGFyaXRpZXMiLCJtYXAiLCJwcm9kdWN0IiwiQXJyYXkiLCJpc0FycmF5Iiwic29ydCIsImEiLCJiIiwidG9wUHJvZHVjdHMiLCJmaWx0ZXIiLCJzbGljZSIsInNldCIsInJlbGVhc2UiLCJlcnIiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/recommed-products.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frecommed-products&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frecommed-products.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();